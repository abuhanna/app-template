import{y as C,q as b,z as M,A as V,c as u,l as s,a as n,t as r,w as l,E as e,o as c,h as N,i as U,M as $,F as B,D as q}from"./index-ClbwuvgW.js";import{u as x}from"./persistentNotification-DtSPFdru.js";import{u as P}from"./user-C0EkE2Q2.js";import{u as T}from"./department-BdgeOQz3.js";import{s as d}from"./index-LwmQ9GO6.js";import{s as v}from"./index-CO05eax1.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"dashboard"},L={class:"dashboard-header"},z={class:"welcome-text"},I={class:"stats-grid"},J={class:"stat-content"},Q={class:"stat-info"},R={class:"stat-value"},W={class:"stat-content"},j={class:"stat-info"},G={class:"stat-value"},H={class:"stat-content"},K={class:"stat-info"},O={class:"stat-value"},X={class:"stat-content"},Y={class:"stat-info"},Z={class:"stat-value"},tt={class:"quick-actions"},st={key:0,class:"no-activity"},et={key:1,class:"activity-list"},at={class:"activity-content"},it={class:"activity-title"},ot={class:"activity-message"},nt={class:"activity-time"},rt={__name:"dashboard",setup(lt){const m=C(),h=x(),f=P(),k=T(),A=b(()=>m.user?.name||m.user?.username||"User"),_=b(()=>m.user?.role==="Admin"),i=M({totalUsers:0,totalDepartments:0,activeUsers:0,unreadNotifications:0}),g=b(()=>h.notifications.slice(0,5)),w=o=>{const t=new Date(o),S=new Date-t,p=Math.floor(S/6e4);if(p<1)return"Just now";if(p<60)return`${p}m ago`;const y=Math.floor(p/60);if(y<24)return`${y}h ago`;const D=Math.floor(y/24);return D<7?`${D}d ago`:t.toLocaleDateString()};return V(async()=>{_.value&&(await Promise.all([f.fetchUsers(),k.fetchDepartments()]),i.value.totalUsers=f.users.length,i.value.totalDepartments=k.departments.length,i.value.activeUsers=f.users.filter(o=>o.isActive).length),i.value.unreadNotifications=h.unreadCount}),(o,t)=>(c(),u("div",F,[s("div",L,[t[4]||(t[4]=s("h1",null,"Dashboard",-1)),s("p",z,"Welcome back, "+r(A.value)+"!",1)]),s("div",I,[n(e(d),{class:"stat-card"},{content:l(()=>[s("div",J,[t[6]||(t[6]=s("div",{class:"stat-icon users"},[s("i",{class:"pi pi-users"})],-1)),s("div",Q,[s("span",R,r(i.value.totalUsers),1),t[5]||(t[5]=s("span",{class:"stat-label"},"Total Users",-1))])])]),_:1}),n(e(d),{class:"stat-card"},{content:l(()=>[s("div",W,[t[8]||(t[8]=s("div",{class:"stat-icon departments"},[s("i",{class:"pi pi-building"})],-1)),s("div",j,[s("span",G,r(i.value.totalDepartments),1),t[7]||(t[7]=s("span",{class:"stat-label"},"Departments",-1))])])]),_:1}),n(e(d),{class:"stat-card"},{content:l(()=>[s("div",H,[t[10]||(t[10]=s("div",{class:"stat-icon active"},[s("i",{class:"pi pi-check-circle"})],-1)),s("div",K,[s("span",O,r(i.value.activeUsers),1),t[9]||(t[9]=s("span",{class:"stat-label"},"Active Users",-1))])])]),_:1}),n(e(d),{class:"stat-card"},{content:l(()=>[s("div",X,[t[12]||(t[12]=s("div",{class:"stat-icon notifications"},[s("i",{class:"pi pi-bell"})],-1)),s("div",Y,[s("span",Z,r(i.value.unreadNotifications),1),t[11]||(t[11]=s("span",{class:"stat-label"},"Unread Notifications",-1))])])]),_:1})]),n(e(d),{class:"quick-actions-card"},{title:l(()=>[...t[13]||(t[13]=[$("Quick Actions",-1)])]),content:l(()=>[s("div",tt,[_.value?(c(),N(e(v),{key:0,label:"Add User",icon:"pi pi-user-plus",onClick:t[0]||(t[0]=a=>o.$router.push("/users"))})):U("",!0),_.value?(c(),N(e(v),{key:1,label:"Add Department",icon:"pi pi-building",severity:"secondary",onClick:t[1]||(t[1]=a=>o.$router.push("/departments"))})):U("",!0),n(e(v),{label:"View Notifications",icon:"pi pi-bell",severity:"info",onClick:t[2]||(t[2]=a=>o.$router.push("/notifications"))}),n(e(v),{label:"My Profile",icon:"pi pi-user",severity:"help",onClick:t[3]||(t[3]=a=>o.$router.push("/profile"))})])]),_:1}),n(e(d),{class:"activity-card"},{title:l(()=>[...t[14]||(t[14]=[$("Recent Activity",-1)])]),content:l(()=>[g.value.length===0?(c(),u("div",st,[...t[15]||(t[15]=[s("i",{class:"pi pi-inbox"},null,-1),s("span",null,"No recent activity",-1)])])):(c(),u("div",et,[(c(!0),u(B,null,q(g.value,a=>(c(),u("div",{key:a.id,class:"activity-item"},[t[16]||(t[16]=s("div",{class:"activity-icon"},[s("i",{class:"pi pi-bell"})],-1)),s("div",at,[s("span",it,r(a.title),1),s("span",ot,r(a.message),1),s("span",nt,r(w(a.createdAt)),1)])]))),128))]))]),_:1})]))}},_t=E(rt,[["__scopeId","data-v-f4978f4d"]]);export{_t as default};
