import{$ as V,y as x,z as w,a3 as g,A as S,r as A,c as m,o as i,l as e,a5 as B,h as C,i as p,a as n,w as _,M as b,t as c,E as d}from"./index-ClbwuvgW.js";import{a as E}from"./index-DmDW0EJB.js";import{s as M}from"./index-CNYpXzrl.js";import{s as N}from"./index-CO05eax1.js";import{s as U}from"./index-Bnyv11sF.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B6u3Hjan.js";const I={class:"login-container"},q={class:"login-card"},z={class:"form-field"},P={key:0,class:"p-error"},T={class:"form-field"},D={key:0,class:"p-error"},F={class:"form-actions"},L={__name:"login",setup(R){const f=V(),v=x(),l=w(!1),t=w(""),o=g({username:"",password:""}),a=g({username:"",password:""});S(()=>{v.isAuthenticated&&f.push("/dashboard")});const y=()=>{a.username="",a.password="";let r=!0;return o.username.trim()||(a.username="Username is required",r=!1),o.password||(a.password="Password is required",r=!1),r},h=async()=>{if(y()){l.value=!0,t.value="";try{await v.login(o.username,o.password),f.push("/dashboard")}catch(r){t.value=r.response?.data?.message||"Invalid username or password"}finally{l.value=!1}}};return(r,s)=>{const k=A("router-link");return i(),m("div",I,[e("div",q,[s[5]||(s[5]=e("div",{class:"login-header"},[e("i",{class:"pi pi-box logo-icon"}),e("h1",{class:"login-title"},"AppTemplate"),e("p",{class:"login-subtitle"},"Sign in to your account")],-1)),e("form",{onSubmit:B(h,["prevent"]),class:"login-form"},[t.value?(i(),C(d(U),{key:0,severity:"error",closable:!1,class:"login-error"},{default:_(()=>[b(c(t.value),1)]),_:1})):p("",!0),e("div",z,[s[2]||(s[2]=e("label",{for:"username"},"Username",-1)),n(d(E),{id:"username",modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=u=>o.username=u),placeholder:"Enter your username",disabled:l.value,invalid:!!a.username,class:"w-full"},null,8,["modelValue","disabled","invalid"]),a.username?(i(),m("small",P,c(a.username),1)):p("",!0)]),e("div",T,[s[3]||(s[3]=e("label",{for:"password"},"Password",-1)),n(d(M),{id:"password",modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=u=>o.password=u),placeholder:"Enter your password",disabled:l.value,feedback:!1,toggleMask:"",invalid:!!a.password,inputClass:"w-full",class:"w-full"},null,8,["modelValue","disabled","invalid"]),a.password?(i(),m("small",D,c(a.password),1)):p("",!0)]),e("div",F,[n(k,{to:"/forgot-password",class:"forgot-link"},{default:_(()=>[...s[4]||(s[4]=[b(" Forgot password? ",-1)])]),_:1})]),n(d(N),{type:"submit",label:"Sign In",loading:l.value,class:"w-full",size:"large"},null,8,["loading"])],32)])])}}},W=$(L,[["__scopeId","data-v-a4862fdc"]]);export{W as default};
