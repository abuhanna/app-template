import{a2 as M,z as S,q as y,A as D,c as n,l as t,a as k,h as v,i as g,E as l,w as R,o as a,a8 as b,F as B,D as F,n as f,t as m,j as V,a4 as z}from"./index-ClbwuvgW.js";import{u as E}from"./persistentNotification-DtSPFdru.js";import{s as I}from"./index-LwmQ9GO6.js";import{s as w}from"./index-CO05eax1.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"notifications-page"},j={class:"page-header"},q={key:0,class:"loading-state"},J={key:1,class:"empty-state"},P={key:2,class:"notification-list"},U={class:"notification-content"},Y={class:"notification-header"},G={class:"notification-title"},H={class:"notification-time"},K={class:"notification-message"},O={class:"notification-actions"},Q={__name:"index",setup(W){const r=E(),d=M(),u=S(!1),h=y(()=>r.notifications),x=y(()=>r.unreadCount),N=i=>({info:"pi pi-info-circle",success:"pi pi-check-circle",warning:"pi pi-exclamation-triangle",error:"pi pi-times-circle"})[i]||"pi pi-bell",$=i=>{const s=new Date(i),e=new Date-s,o=Math.floor(e/6e4);if(o<1)return"Just now";if(o<60)return`${o} minute${o>1?"s":""} ago`;const c=Math.floor(o/60);if(c<24)return`${c} hour${c>1?"s":""} ago`;const p=Math.floor(c/24);return p<7?`${p} day${p>1?"s":""} ago`:s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},A=async i=>{try{await r.markAsRead(i.id)}catch{d.error("Failed to mark notification as read")}},C=async()=>{try{await r.markAllAsRead(),d.success("All notifications marked as read")}catch{d.error("Failed to mark all notifications as read")}};return D(async()=>{u.value=!0;try{await r.fetchNotifications()}finally{u.value=!1}}),(i,s)=>{const _=z;return a(),n("div",T,[t("div",j,[s[0]||(s[0]=t("div",null,[t("h1",null,"Notifications"),t("p",{class:"page-subtitle"},"View and manage your notifications")],-1)),x.value>0?(a(),v(l(w),{key:0,label:"Mark all as read",icon:"pi pi-check",severity:"secondary",onClick:C})):g("",!0)]),k(l(I),null,{content:R(()=>[u.value?(a(),n("div",q,[k(l(b),{style:{width:"50px",height:"50px"}})])):h.value.length===0?(a(),n("div",J,[...s[1]||(s[1]=[t("i",{class:"pi pi-inbox"},null,-1),t("span",null,"No notifications",-1),t("p",null,"You're all caught up!",-1)])])):(a(),n("div",P,[(a(!0),n(B,null,F(h.value,e=>(a(),n("div",{key:e.id,class:f(["notification-item",{unread:!e.isRead}])},[t("div",{class:f(["notification-icon",e.type])},[t("i",{class:f(N(e.type))},null,2)],2),t("div",U,[t("div",Y,[t("span",G,m(e.title),1),t("span",H,m($(e.createdAt)),1)]),t("p",K,m(e.message),1)]),t("div",O,[e.isRead?g("",!0):V((a(),v(l(w),{key:0,icon:"pi pi-check",text:"",rounded:"",severity:"info",onClick:o=>A(e)},null,8,["onClick"])),[[_,"Mark as read",void 0,{top:!0}]])])],2))),128))]))]),_:1})])}}},at=L(Q,[["__scopeId","data-v-d19b3395"]]);export{at as default};
