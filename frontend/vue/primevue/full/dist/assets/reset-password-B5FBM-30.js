import{v as x,$ as B,z as p,a3 as k,A as E,r as M,c as d,o as t,l as e,a5 as N,h as R,i as f,a as n,w as P,M as b,t as m,E as u,a7 as $}from"./index-ClbwuvgW.js";import{s as g}from"./index-CNYpXzrl.js";import{s as y}from"./index-CO05eax1.js";import{s as S}from"./index-Bnyv11sF.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DmDW0EJB.js";import"./index-B6u3Hjan.js";const q={class:"reset-password-container"},z={class:"reset-password-card"},A={class:"form-field"},L={key:0,class:"p-error"},T={class:"form-field"},U={key:0,class:"p-error"},Y={class:"back-to-login"},j={key:1,class:"success-state"},D={__name:"reset-password",setup(F){const _=x();B();const i=p(!1),l=p(""),v=p(!1),c=p(""),a=k({password:"",confirmPassword:""}),o=k({password:"",confirmPassword:""});E(()=>{c.value=_.query.token,c.value||(l.value="Invalid or missing reset token")});const h=()=>{let r=!0;return Object.keys(o).forEach(s=>o[s]=""),a.password?a.password.length<6&&(o.password="Password must be at least 6 characters",r=!1):(o.password="Password is required",r=!1),a.confirmPassword?a.password!==a.confirmPassword&&(o.confirmPassword="Passwords do not match",r=!1):(o.confirmPassword="Please confirm your password",r=!1),r},V=async()=>{if(h()){if(!c.value){l.value="Invalid or missing reset token";return}i.value=!0,l.value="";try{await $.resetPassword({token:c.value,newPassword:a.password}),v.value=!0}catch(r){l.value=r.response?.data?.message||"Failed to reset password. The link may have expired."}finally{i.value=!1}}};return(r,s)=>{const C=M("router-link");return t(),d("div",q,[e("div",z,[s[9]||(s[9]=e("div",{class:"card-header"},[e("i",{class:"pi pi-lock logo-icon"}),e("h1",{class:"card-title"},"Reset Password"),e("p",{class:"card-subtitle"},"Enter your new password below.")],-1)),v.value?(t(),d("div",j,[s[6]||(s[6]=e("div",{class:"success-icon"},[e("i",{class:"pi pi-check-circle"})],-1)),s[7]||(s[7]=e("h2",null,"Password Reset Successful",-1)),s[8]||(s[8]=e("p",null,"Your password has been successfully reset. You can now login with your new password.",-1)),n(u(y),{label:"Go to Login",onClick:s[2]||(s[2]=w=>r.$router.push("/login")),class:"w-full"})])):(t(),d("form",{key:0,onSubmit:N(V,["prevent"]),class:"reset-password-form"},[l.value?(t(),R(u(S),{key:0,severity:"error",closable:!1},{default:P(()=>[b(m(l.value),1)]),_:1})):f("",!0),e("div",A,[s[3]||(s[3]=e("label",{for:"password"},"New Password",-1)),n(u(g),{id:"password",modelValue:a.password,"onUpdate:modelValue":s[0]||(s[0]=w=>a.password=w),placeholder:"Enter new password",disabled:i.value,toggleMask:"",invalid:!!o.password,inputClass:"w-full",class:"w-full"},null,8,["modelValue","disabled","invalid"]),o.password?(t(),d("small",L,m(o.password),1)):f("",!0)]),e("div",T,[s[4]||(s[4]=e("label",{for:"confirmPassword"},"Confirm Password",-1)),n(u(g),{id:"confirmPassword",modelValue:a.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=w=>a.confirmPassword=w),placeholder:"Confirm new password",disabled:i.value,feedback:!1,toggleMask:"",invalid:!!o.confirmPassword,inputClass:"w-full",class:"w-full"},null,8,["modelValue","disabled","invalid"]),o.confirmPassword?(t(),d("small",U,m(o.confirmPassword),1)):f("",!0)]),n(u(y),{type:"submit",label:"Reset Password",loading:i.value,class:"w-full",size:"large"},null,8,["loading"]),e("div",Y,[n(C,{to:"/login",class:"back-link"},{default:P(()=>[...s[5]||(s[5]=[e("i",{class:"pi pi-arrow-left"},null,-1),b(" Back to Login ",-1)])]),_:1})])],32))])])}}},X=I(D,[["__scopeId","data-v-dd2aecb9"]]);export{X as default};
