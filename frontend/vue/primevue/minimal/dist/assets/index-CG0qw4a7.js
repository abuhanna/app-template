import{a9 as C,l as M,e as y,Z as A,c as o,f as t,a as m,i as R,g,P as l,j as S,o as s,aW as j,F as D,h as B,n as f,t as x,w as F,T}from"./index-D462s2qb.js";import{u as V}from"./persistentNotification-DWcvnp6G.js";import{s as I}from"./index-CDpYWBTz.js";import{a as k}from"./index-ggVQrxbj.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"p-3"},z={class:"flex justify-content-end mb-3"},E={key:0,class:"flex justify-content-center p-6"},J={key:1,class:"flex flex-column align-items-center justify-content-center p-6 text-center text-500 gap-3"},U={key:2,class:"flex flex-column"},W=["onClick"],Y={class:"flex-1 ml-3"},Z={class:"flex justify-content-between align-items-center mb-1"},q={class:"font-bold text-900"},G={class:"text-sm text-500"},H={class:"m-0 text-600 line-height-3"},K={key:0,class:"flex align-items-center ml-3"},O={__name:"index",setup(Q){const i=V(),d=C(),u=M(!1),h=y(()=>i.notifications),v=y(()=>i.unreadCount),b=r=>({info:"pi pi-info-circle",success:"pi pi-check-circle",warning:"pi pi-exclamation-triangle",error:"pi pi-times-circle"})[r]||"pi pi-bell",w=r=>{const a=new Date(r),e=new Date-a,n=Math.floor(e/6e4);if(n<1)return"Just now";if(n<60)return`${n} minute${n>1?"s":""} ago`;const c=Math.floor(n/60);if(c<24)return`${c} hour${c>1?"s":""} ago`;const p=Math.floor(c/24);return p<7?`${p} day${p>1?"s":""} ago`:a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},N=async r=>{try{await i.markAsRead(r.id)}catch{d.error("Failed to mark notification as read")}},$=async()=>{try{await i.markAllAsRead(),d.success("All notifications marked as read")}catch{d.error("Failed to mark all notifications as read")}};return A(async()=>{u.value=!0;try{await i.fetchNotifications()}finally{u.value=!1}}),(r,a)=>{const _=T;return s(),o("div",P,[t("div",z,[v.value>0?(s(),R(l(k),{key:0,label:"Mark all as read",icon:"pi pi-check",severity:"secondary",onClick:$})):g("",!0)]),m(l(I),null,{content:S(()=>[u.value?(s(),o("div",E,[m(l(j),{style:{width:"50px",height:"50px"}})])):h.value.length===0?(s(),o("div",J,[...a[0]||(a[0]=[t("i",{class:"pi pi-inbox text-6xl opacity-50"},null,-1),t("span",{class:"text-xl font-medium text-600"},"No notifications",-1),t("p",{class:"m-0"},"You're all caught up!",-1)])])):(s(),o("div",U,[(s(!0),o(D,null,B(h.value,e=>(s(),o("div",{key:e.id,class:f(["flex align-items-start p-3 border-bottom-1 surface-border hover:surface-hover cursor-pointer transition-colors transition-duration-200",{"surface-50":!e.isRead,"border-left-3 border-primary-500":!e.isRead}]),onClick:n=>N(e)},[t("div",{class:f(["flex align-items-center justify-content-center border-round w-3rem h-3rem flex-shrink-0",{"bg-blue-100 text-blue-600":e.type==="info","bg-green-100 text-green-600":e.type==="success","bg-yellow-100 text-yellow-600":e.type==="warning","bg-red-100 text-red-600":e.type==="error"}])},[t("i",{class:f(["text-xl",b(e.type)])},null,2)],2),t("div",Y,[t("div",Z,[t("span",q,x(e.title),1),t("span",G,x(w(e.createdAt)),1)]),t("p",H,x(e.message),1)]),e.isRead?g("",!0):(s(),o("div",K,[F(m(l(k),{icon:"pi pi-circle-fill",text:"",rounded:"",class:"text-primary-500 w-2rem h-2rem"},null,512),[[_,"Mark as read",void 0,{top:!0}]])]))],10,W))),128))]))]),_:1})])}}},ae=L(O,[["__scopeId","data-v-4a5ce22e"]]);export{ae as default};
