import{b as x,Q as B,l as w,aV as k,Z as N,r as R,c as d,o as t,f as e,ap as E,i as M,g as f,a as n,j as P,L as b,t as m,P as u,aU as S}from"./index-D462s2qb.js";import{s as g}from"./index-EN2eqwjt.js";import{a as y}from"./index-ggVQrxbj.js";import{s as $}from"./index-IjqWn3F7.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Capuxi7Q.js";import"./index-DKTsTgk9.js";const L={class:"reset-password-container"},U={class:"reset-password-card"},j={class:"form-field"},q={key:0,class:"p-error"},T={class:"form-field"},Y={key:0,class:"p-error"},z={class:"back-to-login"},A={key:1,class:"success-state"},D={__name:"reset-password",setup(F){const _=x();B();const i=w(!1),l=w(""),v=w(!1),c=w(""),a=k({password:"",confirmPassword:""}),o=k({password:"",confirmPassword:""});N(()=>{c.value=_.query.token,c.value||(l.value="Invalid or missing reset token")});const V=()=>{let r=!0;return Object.keys(o).forEach(s=>o[s]=""),a.password?a.password.length<6&&(o.password="Password must be at least 6 characters",r=!1):(o.password="Password is required",r=!1),a.confirmPassword?a.password!==a.confirmPassword&&(o.confirmPassword="Passwords do not match",r=!1):(o.confirmPassword="Please confirm your password",r=!1),r},h=async()=>{if(V()){if(!c.value){l.value="Invalid or missing reset token";return}i.value=!0,l.value="";try{await S.resetPassword({token:c.value,newPassword:a.password}),v.value=!0}catch(r){l.value=r.response?.data?.message||"Failed to reset password. The link may have expired."}finally{i.value=!1}}};return(r,s)=>{const C=R("router-link");return t(),d("div",L,[e("div",U,[s[9]||(s[9]=e("div",{class:"card-header"},[e("i",{class:"pi pi-lock logo-icon"}),e("h1",{class:"card-title"},"Reset Password"),e("p",{class:"card-subtitle"},"Enter your new password below.")],-1)),v.value?(t(),d("div",A,[s[6]||(s[6]=e("div",{class:"success-icon"},[e("i",{class:"pi pi-check-circle"})],-1)),s[7]||(s[7]=e("h2",null,"Password Reset Successful",-1)),s[8]||(s[8]=e("p",null,"Your password has been successfully reset. You can now login with your new password.",-1)),n(u(y),{label:"Go to Login",onClick:s[2]||(s[2]=p=>r.$router.push("/login")),class:"w-full"})])):(t(),d("form",{key:0,onSubmit:E(h,["prevent"]),class:"reset-password-form"},[l.value?(t(),M(u($),{key:0,severity:"error",closable:!1},{default:P(()=>[b(m(l.value),1)]),_:1})):f("",!0),e("div",j,[s[3]||(s[3]=e("label",{for:"password"},"New Password",-1)),n(u(g),{id:"password",modelValue:a.password,"onUpdate:modelValue":s[0]||(s[0]=p=>a.password=p),placeholder:"Enter new password",disabled:i.value,toggleMask:"",invalid:!!o.password,inputClass:"w-full",class:"w-full"},null,8,["modelValue","disabled","invalid"]),o.password?(t(),d("small",q,m(o.password),1)):f("",!0)]),e("div",T,[s[4]||(s[4]=e("label",{for:"confirmPassword"},"Confirm Password",-1)),n(u(g),{id:"confirmPassword",modelValue:a.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=p=>a.confirmPassword=p),placeholder:"Confirm new password",disabled:i.value,feedback:!1,toggleMask:"",invalid:!!o.confirmPassword,inputClass:"w-full",class:"w-full"},null,8,["modelValue","disabled","invalid"]),o.confirmPassword?(t(),d("small",Y,m(o.confirmPassword),1)):f("",!0)]),n(u(y),{type:"submit",label:"Reset Password",loading:i.value,class:"w-full",size:"large"},null,8,["loading"]),e("div",z,[n(C,{to:"/login",class:"back-link"},{default:P(()=>[...s[5]||(s[5]=[e("i",{class:"pi pi-arrow-left"},null,-1),b(" Back to Login ",-1)])]),_:1})])],32))])])}}},W=I(D,[["__scopeId","data-v-dd2aecb9"]]);export{W as default};
